let Tableau=function(e={}){if(typeof t=="undefined"){if(typeof jQuery!="undefined")var t=jQuery;else throw ReferenceError("jQuery is required to use Tableau")}e=t.extend({minCellWidth:240,bordered:true,firstColumnWidth:null},e);console.log(e);t("table.tableau").each(function(l,s){let i,o,d,n,r,a,f=false;let u=t("<div></div>").addClass("tableau");let h=t("<div></div>").addClass("tableau-inner");let c=t(s).clone().removeClass("tableau");c.appendTo(h);h.appendTo(u);u.insertBefore(s);s.remove();p();u.scroll(function(e){if(!f)return;let l=t(this).scrollLeft();let s=t(this).scrollTop();o.css("top",s);n.css({left:l});if(l!=0)n.addClass("floating");else n.removeClass("floating")});function p(){o=t("thead",t(c));d=t("tbody",t(c));n=t("td:first-of-type",d);r=t("tr:first-of-type>th",o).length;a=t("th,td",u);c.addClass(e.bordered?"bordered":"");n.push(t("th:first-of-type",o)[0]);n.css({position:"relative",left:0});i=u.width()/r;i=i<e.minCellWidth?e.minCellWidth:i;a.css("min-width",i);d.css("marginTop",o.height());n.css({minWidth:e.firstColumnWidth==null?e.minCellWidth:e.firstColumnWidth});f=true}function m(){f=false;o.css({top:0});n.css({left:0}).removeClass("floating")}u[0].tableau={refresh:(l={})=>{e=t.extend(e,l);m();p()},styleOnly:m}})};if(typeof module!="undefined"&&module.exports)module.exports=Tableau;
