let Tableau=function(e={}){if(typeof t=="undefined"){if(typeof jQuery!="undefined")var t=jQuery;else throw ReferenceError("jQuery is required to use Tableau")}e=t.extend({minCellWidth:240,bordered:true,firstColumnWidth:null},e);console.log(e);t("table.tableau, .tableau>.tableau-inner>table").each(function(l,s){let a=t(this).parent().hasClass("tableau-inner")&&t(this).parent().parent().hasClass("tableau");let i,n,r,o,d,f,u=false;let h=a?t(this).parent().parent():t("<div></div>").addClass("tableau");let p=a?t(this).parent():t("<div></div>").addClass("tableau-inner");let c=a?t(s):t(s).clone().removeClass("tableau");if(!a){c.appendTo(p);p.appendTo(h);h.insertBefore(s);s.remove()}b();h.scroll(function(e){if(!u)return;let l=t(this).scrollLeft();let s=t(this).scrollTop();n.css("top",s);o.css({left:l});if(l!=0)o.addClass("floating");else o.removeClass("floating")});function b(){n=t("thead",t(c));r=t("tbody",t(c));o=t("td:first-of-type",r);d=t("tr:first-of-type>th",n).length;f=t("th,td",h);c.addClass(e.bordered?"bordered":"");o.push(t("th:first-of-type",n)[0]);o.css({position:"relative",left:0});i=h.width()/d;i=i<e.minCellWidth?e.minCellWidth:i;f.css("min-width",i);r.css("marginTop",n.height());o.css({minWidth:e.firstColumnWidth==null?i:e.firstColumnWidth});u=true}function m(){u=false;n.css({top:0});o.css({left:0}).removeClass("floating")}h[0].tableau={refresh:(l={})=>{e=t.extend(e,l);m();b()},styleOnly:m}})};if(typeof module!="undefined"&&module.exports)module.exports=Tableau;
